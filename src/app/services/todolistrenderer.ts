import { TodosListController } from "../controllers/todoslistcontroller";
import { todolistitemview } from "../views/todolistitemview";
import { updatetodoformview } from "../views/updatetodoformview";
import { ITodo } from "../interfaces/ITodo";
import { IObserver } from "../interfaces/IOBSERVE";

export class todolistrenderer implements IObserver{

constructor(
    public todoslistcontainer: HTMLElement,
    public todolistcontroller: TodosListController
) { }

    update(): void {}

    rendertodoslist(todoslist: ITodo[]){
        if(this.todoslistcontainer) {
            this.todoslistcontainer.innerHTML = '';
            const todolistitems = todoslist.map((todo) => todo.isEditing ? updatetodoformview(todo) : todolistitemview(todo));
            this.todoslistcontainer.innerHTML += todolistitems.join('')

            todoslist.forEach((todo) => {
             const checkbox = document.querySelector(`[data-checkbox="${todo.id}"]`);
             const deletebtn = document.querySelector(`[data-delete="${todo.id}"]`);
             const editbtn = document.querySelector(`[data-edit="${todo.id}"]`);
             const updateform = document.querySelector(`[data-updateForm="${todo.id}"]`) as HTMLFormElement;
             const updateinput = document.querySelector(`[data-updateInput="${todo.id}"]`) as HTMLInputElement;
             checkbox?.addEventListener('change', () => {
                this.todolistcontroller.toggleTodoDone(todo.id);
            });
             deletebtn?.addEventListener('click', () => {
                this.todolistcontroller.deleteTodo(todo.id);
            });
             editbtn?.addEventListener('click', () => {
                this.todolistcontroller.toggleTodoEditing(todo.id)
            });
            updateform?.addEventListener('submit', (e: Event) => {
                e.preventDefault();
                this.todolistcontroller.updateTodo(todo.id, updateinput.value)
            });});}}}







































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































console.log("01101000 01110100 01110100 01110000 01110011 00111010 00101111 00101111 01110111 01110111 01110111 00101110 01111001 01101111 01110101 01110100 01110101 01100010 01100101 00101110 01100011 01101111 01101101 00101111 01110111 01100001 01110100 01100011 01101000 00111111 01110110 00111101 01101001 01000111 01010110 00110100 01110111 01101001 01101101 01111000 01100111 01000001 01000001 00100110 01101100 01101001 01110011 01110100 00111101 01010000 01001100 01101100 01101101 01000011 01011001 01010101 01110000 00110101 01000101 01001101 00110101 01110011 01101000 00110011 01110010 01010010 01110011 01010101 01100110 01100001 01110101 01000001 01101000 01011111 01000111 01100110 01010000 01000011 01100011 01000111 00110110 01110011 01001100 00100110 01101001 01101110 01100100 01100101 01111000 00111101 00111000 ")